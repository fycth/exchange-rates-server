-- createdb xrserver
-- CREATE USER xrserver WITH PASSWORD 'xrserver';
-- GRANT ALL PRIVILEGES ON DATABASE "xrserver" to xrserver;

CREATE TABLE IF NOT EXISTS rates (id BIGSERIAL, name varchar, rate double precision, source smallint, time timestamp);
CREATE INDEX source ON rates (source);

CREATE TABLE IF NOT EXISTS sources (id SERIAL, name varchar, url varchar, descr varchar, parser_class_name varchar, enabled boolean);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('ECB','https://www.ecb.europa.eu/stats/eurofxref/eurofxref-daily.xml','European Central Bank','com.sergiienko.xrserver.parsers.ECBParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('Fixer','http://api.fixer.io/latest','Free rates from Fixer.io','com.sergiienko.xrserver.parsers.FixerParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('CDT','no URL','PokerStars dumb currency','com.sergiienko.xrserver.parsers.CDTStaticParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('AMD','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURAMD%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance AMD','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('ARS','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURARS%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance ARS','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('AUD','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURAUD%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance AUD','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('BGN','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURBGN%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance BGN','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('BIF','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURBIF%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance BIF','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('BRL','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURBRL%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance BRL','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('CAD','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURCAD%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance CAD','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('CDF','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURCDF%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance CDF','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('CHF','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURCHF%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance CHF','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('CNY','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURCNY%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance CNY','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('CZK','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURCZK%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance CZK','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('DKK','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURDKK%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance DKK','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('GBP','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURGBP%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance GBP','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('GEL','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURGEL%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance GEL','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('HKD','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURHKD%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance HKD','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('HRK','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURHRK%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance HRK','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('HUF','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURHUF%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance HUF','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('IDR','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURIDR%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance IDR','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('ILS','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURILS%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance ILS','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('INR','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURINR%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance INR','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('ISK','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURISK%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance ISK','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('JPY','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURJPY%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance JPY','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('KRW','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURKRW%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance KRW','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('MXN','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURMXN%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance MXN','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('MYR','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURMYR%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance MYR','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('NGN','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURNGN%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance NGN','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('NOK','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURNOK%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance NOK','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('NZD','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURNZD%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance NZD','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('PHP','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURPHP%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance PHP','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('PLN','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURPLN%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance PLN','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('RON','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURRON%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance RON','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('RUB','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURRUB%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance RUB','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('SEK','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURSEK%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance SEK','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('SGD','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURSGD%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance SGD','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('THB','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURTHB%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance THB','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('TRY','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURTRY%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance TRY','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('TWD','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURTWD%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance TWD','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('UAH','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURUAH%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance UAH','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('USD','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURUSD%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance USD','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('VEF','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURVEF%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance VEF','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('XAF','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURXAF%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance XAF','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('ZAR','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURZAR%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance ZAR','com.sergiienko.xrserver.parsers.YahooFinParser', true);
INSERT INTO sources (name,url,descr,parser_class_name,enabled) VALUES ('ZMW','https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.xchange%20where%20pair%20in%20%28%22EURZMW%22%29&format=json&diagnostics=false&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=','YahooFinance ZMW','com.sergiienko.xrserver.parsers.YahooFinParser', true);

CREATE TABLE IF NOT EXISTS groups (id SERIAL, name varchar, descr varchar, sources integer[], dflt boolean);
INSERT INTO groups (name,descr,sources,dflt) VALUES ('default','default group',array[1],TRUE);

CREATE TABLE IF NOT EXISTS currency_groups (id SERIAL, name varchar, descr varchar, currencies text[], sources integer[], dflt boolean);
INSERT INTO currency_groups (name,descr,currencies,sources,dflt) VALUES ('default','default currency group',array['USD','NOK'],array[1,2],true);
